<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/main.css" />
    <title>My Name Page</title>
  </head>
  <body>
    <div class="container card">
      <div class="loading"><h1>Loading...</h1></div>
      <div class="welcome hidden">
        <h1 class="welcome__title">Hello my Server!</h1>
        <a class="welcome__link" href="/sum.html">Counting page</a>
        <a class="welcome__link" href="/index.html">Home page</a>
        <a class="logout" href="/trackName.html">Log out</a>
      </div>
    </div>

    <script>
      const title = document.querySelector('.welcome__title');
      const loading = document.querySelector('.loading');
      const logout = document.querySelector('.logout');

      const name = document.cookie.replace('NAME=', '');

      window.addEventListener('load', () => {
        if (!name) {
          setTimeout(() => (window.location.href = '/trackName'), 500);
          return;
        }
        title.closest('.welcome').classList.remove('hidden');
        loading.classList.add('hidden');
        title.textContent = `Welcome ${name}!`;
      });

      logout.addEventListener('click', () => {
        document.cookie =
          'NAME=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';
      });
    </script>
  </body>
</html>
